services:
  sionna:
    image: nvcr.io/nvidia/tensorflow:24.10-tf2-py3
    container_name: sionna-worker
    # Auto-install libraries on startup
    command: >
      bash -c "pip install sionna matplotlib pandas scipy && tail -f /dev/null"
    working_dir: /mnt/nas_data/sionna-sim
    volumes:
      - /mnt/nas_data:/mnt/nas_data
    deploy:
      resources:
        reservations:
          devices:
            - driver: nvidia
              count: all
              capabilities: [gpu]
    ipc: host
    network_mode: host
    restart: unless-stopped
